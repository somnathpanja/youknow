<!DOCTYPE html>
<html ng-app="monitoring">
<head lang="en">
    <meta charset="UTF-8">
    <title>Server Monitoring</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="lib/jquery-simple-datetimepicker-1.12.0/jquery.simple-dtpicker.js"></script>
    <link type="text/css" href="lib/jquery-simple-datetimepicker-1.12.0/jquery.simple-dtpicker.css" rel="stylesheet" />
    <style type="text/css">
        body { background-color: #fefefe; padding-left: 2%; padding-bottom: 100px; color: #101010; }
        footer{ font-size:small;position:fixed;right:5px;bottom:5px; }
        a:link, a:visited  { color: #0000ee; }
        pre{ background-color: #eeeeee; margin-left: 1%; margin-right: 2%; padding: 2% 2% 2% 5%; }
        p { font-size: 0.9rem; }
        ul { font-size: 0.9rem; }
        hr { border: 2px solid #eeeeee; margin: 2% 0% 2% -3%; }
        h3 { border-bottom: 2px solid #eeeeee; margin: 2rem 0 2rem -1%; padding-left: 1%; padding-bottom: 0.1em; }
        h4 { border-bottom: 1px solid #eeeeee; margin-top: 2rem; margin-left: -1%; padding-left: 1%; padding-bottom: 0.1em; }
        .topcorner{
           position:absolute;
           top:0px;
           right:0px;
        }
    </style>
    <script type="text/javascript">
      window.onload = function () {
        cpuChart = new CanvasJS.Chart("cpuChartContainer", {
          zoomEnabled: true,
          title: {
            text: "CPU Utilization (RealTime)",
            fontSize:20
          }, axisY: {
            title: "CPU %",
            labelFontSize: 10,
            minimum: 0,
            maximum: 100
          },
          axisX: {
            labelFontSize: 10,
            crosshair: {
              enabled: true
            }
          },
          legend: {
            fontSize: 10,
            itemclick: function (e) {
              e.dataSeries.visible = (typeof e.dataSeries.visible === 'undefined') ? true : e.dataSeries.visible;
              e.dataSeries.visible = !e.dataSeries.visible;
              cpuChart.render();
            }
          },
          data: cpuChartData
        });

        memChart = new CanvasJS.Chart("memChartContainer", {
          zoomEnabled: true,
          dataPointMinWidth: 4,
          title: {
            text: "Memory Utilization (RealTime)",
            fontSize:20
          }, axisY: {
            title: "Memory (MB)",
            labelFontSize: 10,
            minimum: 0
          },
          axisX: {
            labelFontSize: 10,
            crosshair: {
              enabled: true
            }
          },
          legend: {
            fontSize: 10,
            itemclick: function (e) {
              e.dataSeries.visible = (typeof e.dataSeries.visible === 'undefined') ? true : e.dataSeries.visible;
              e.dataSeries.visible = !e.dataSeries.visible;
              memChart.render();
            }
          },
          data: memChartData
        });

        loadAvgChart = new CanvasJS.Chart("loadAvgChartContainer", {
          zoomEnabled: true,
          title: {
            text: "SYSTEM LOAD AVG (RealTime)",
            fontSize:20
          }, axisY: {
            title: "Load Average",
            minimum: 0
          },
          axisX: {
            crosshair: {
              enabled: true
            }
          },
          legend: {
            fontSize: 10,
            itemclick: function (e) {
              e.dataSeries.visible = (typeof e.dataSeries.visible === 'undefined') ? true : e.dataSeries.visible;
              e.dataSeries.visible = !e.dataSeries.visible;
              loadAvgChart.render();
            }
          },
          data: loadAvgChartData
        });
      };
    </script>
</head>
<body>

<div style="padding-left: 20px;padding-right: 20px;font-size: 10px" ng-controller="serverController as serverCtrl">
    <h1 style="color:#0A9FF0;">YouKnow
        <span style="position:absolute;top:60px;left:60px;color: black;font-size: 14px;">Simple realtime monitor of your server</span>
    </h1>

    <h5 class="topcorner" style="color:gray;">Youknow is maintained by <a href="https://github.com/somnathpanja">@somnathpanja</a> (Somnath Panja).
        <a href="https://github.com/somnathpanja/youknow">https://github.com/somnathpanja/youknow</a>
        Also find in <a href="https://stackoverflow.com/users/189102/somnath">Stack Overflow.</a>
    </h5>
    <span class="topcorner h4" style="top:40px;right: 20px">Select Server:
        <select ng-model="serverCtrl.selectedServer" ng-options="server.host for server in serverCtrl.servers" ng-change="serverCtrl.onServerSelected()">
            <option value="">--Select Server--</option>
        </select>
    </span>
<table></table>
    <h2>Monitoring {{serverCtrl.currentHost}}
    <span style="font-size: 12px;float:right;margin-right: 0px;">
         <button ng-click="serverCtrl.selectByDate('5m');">5 Minutes</button>
        <button ng-click="serverCtrl.selectByDate('15m')">15 Minutes</button>
        <button ng-click="serverCtrl.selectByDate('30m')">30 Minutes</button>
        <button ng-click="serverCtrl.selectByDate('1h')">1 Hour</button>
        <button ng-click="serverCtrl.selectByDate('2h')">2 Hours</button>
        <button ng-click="serverCtrl.selectByDate('3m')">3 Hours</button>
        <button ng-click="serverCtrl.selectByDate('6m')">6 Hours</button>
        <button ng-click="serverCtrl.selectByDate('12h')">12 Hours</button>
        <button ng-click="serverCtrl.selectByDate('1d')">1 Day</button>
        <button ng-click="serverCtrl.selectByDate('2d')">2 Day</button>
        <!--FROM: <input type="text" name="date10" value="">-->
        <!-- - TO:-->
        <!--<input type="text" name="date11" value=""> <button>Apply</button>-->
    </span>
    </h2>
    <script type="text/javascript">
      $(function(){
        $('*[name=date10]').appendDtpicker({
          "closeOnSelected": true,
          "autodateOnStart": true
        });
      });
      $(function(){
        $('*[name=date11]').appendDtpicker({
          "closeOnSelected": true,
          "autodateOnStart": true
        });
      });
    </script>
    <div>
        <!--<table class="table table-condensed table-bordered table-hover" >-->
            <!--<thead>-->
            <!--<tr style="color:#0A9FF0;">-->
                <!--<td>Host</td>-->
            <!--</tr>-->
            <!--</thead>-->
            <!--<tbody>-->
            <!--<tr ng-repeat="server in serverCtrl.servers">-->
                <!--<td><h5>{{server.host}}</h5></td>-->
            <!--</tr>-->
            <!--</tbody>-->
        <!--</table>-->


        <script type="text/javascript" src="/canvasjs/canvasjs.min.js"></script>
        <div class="container" style="width: 100%;">
            <div class="row">
                <div class="col-xs-6">
                    <div id="loadAvgChartContainer" style="height: 400px; width: 100%;"></div>
                </div>
                <div class="col-xs-6">
                    <div id="cpuChartContainer" style="height: 400px; width: 100%;"></div>
                </div>
            </div>
        </div>
        </br>
        <div id="memChartContainer" style="height: 400px; width: 100%;"></div>
    </div>
</div>
</div>
</body>
</html>